\hypertarget{merger__fptr_8c}{\section{merger\-\_\-fptr.\-c \-File \-Reference}
\label{merger__fptr_8c}\index{merger\-\_\-fptr.\-c@{merger\-\_\-fptr.\-c}}
}
{\ttfamily \#include $<$stdio.\-h$>$}\*
{\ttfamily \#include \char`\"{}flowy.\-h\char`\"{}}\*
{\ttfamily \#include \char`\"{}auto\-\_\-comps.\-h\char`\"{}}\*
{\ttfamily \#include \char`\"{}utils.\-h\char`\"{}}\*
\-Include dependency graph for merger\-\_\-fptr.\-c\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{merger__fptr_8c__incl}
\end{center}
\end{figure}
\subsection*{\-Defines}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{merger__fptr_8c_a369266c24eacffb87046522897a570d5}{\-\_\-\-G\-N\-U\-\_\-\-S\-O\-U\-R\-C\-E}
\end{DoxyCompactItemize}
\subsection*{\-Functions}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structgroup}{group} $\ast$$\ast$$\ast$ \hyperlink{merger__fptr_8c_a3355351c471c88039bef49a658c06109}{merger} (struct \hyperlink{structgroup}{group} $\ast$$\ast$$\ast$filtered\-\_\-groups, size\-\_\-t $\ast$num\-\_\-filtered\-\_\-groups, int num\-\_\-threads, struct \hyperlink{structmerger__rule}{merger\-\_\-rule} $\ast$\hyperlink{flowy_8c_ad16d168606f8e5927810013c8b566b3a}{filter}, int num\-\_\-filter\-\_\-rules)
\end{DoxyCompactItemize}


\subsection{\-Define \-Documentation}
\hypertarget{merger__fptr_8c_a369266c24eacffb87046522897a570d5}{\index{merger\-\_\-fptr.\-c@{merger\-\_\-fptr.\-c}!\-\_\-\-G\-N\-U\-\_\-\-S\-O\-U\-R\-C\-E@{\-\_\-\-G\-N\-U\-\_\-\-S\-O\-U\-R\-C\-E}}
\index{\-\_\-\-G\-N\-U\-\_\-\-S\-O\-U\-R\-C\-E@{\-\_\-\-G\-N\-U\-\_\-\-S\-O\-U\-R\-C\-E}!merger_fptr.c@{merger\-\_\-fptr.\-c}}
\subsubsection[{\-\_\-\-G\-N\-U\-\_\-\-S\-O\-U\-R\-C\-E}]{\setlength{\rightskip}{0pt plus 5cm}\#define {\bf \-\_\-\-G\-N\-U\-\_\-\-S\-O\-U\-R\-C\-E}}}\label{merger__fptr_8c_a369266c24eacffb87046522897a570d5}


\subsection{\-Function \-Documentation}
\hypertarget{merger__fptr_8c_a3355351c471c88039bef49a658c06109}{\index{merger\-\_\-fptr.\-c@{merger\-\_\-fptr.\-c}!merger@{merger}}
\index{merger@{merger}!merger_fptr.c@{merger\-\_\-fptr.\-c}}
\subsubsection[{merger}]{\setlength{\rightskip}{0pt plus 5cm}struct {\bf group}$\ast$$\ast$$\ast$ {\bf merger} (
\begin{DoxyParamCaption}
\item[{struct {\bf group} $\ast$$\ast$$\ast$}]{filtered\-\_\-groups, }
\item[{size\-\_\-t $\ast$}]{num\-\_\-filtered\-\_\-groups, }
\item[{int}]{num\-\_\-threads, }
\item[{struct {\bf merger\-\_\-rule} $\ast$}]{filter, }
\item[{int}]{num\-\_\-filter\-\_\-rules}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}read\mbox{]}}}}\label{merger__fptr_8c_a3355351c471c88039bef49a658c06109}

\begin{DoxyCode}
{
    struct group ***group_tuples;
//    int num_group_tuples;
//    struct group **temp_tuple;
//    int i, j;
    int i;
    struct permut_iter *iter;
    size_t *offsets;

    offsets = (size_t *)malloc(sizeof(size_t)*num_threads);
    if (offsets == NULL) {
        perror("malloc");
        exit(EXIT_FAILURE);
    }

    for (i = 0; i < num_threads; i++) offsets[i] = 0;

    iter = iter_init(offsets, num_filtered_groups, num_threads);

    printf("foobar\n");
    for (i = num_filtered_groups[0]-1; i > num_filtered_groups[0]-10; i--) {
        printf("%p\n", filtered_groups[0][i]);
        if (filtered_groups[0][i] == NULL) {
            perror("is NULL");
            exit(EXIT_FAILURE);
        }
    }

    do {
        // break if any of the groups is already grouped
        for (i = 0; i < num_threads; i++) {
            if (filtered_groups[i][iter->array[i]] == NULL) goto cont;
        }

        for (i = 0; i < num_filter_rules; i++) {
            printf("%p\n", filtered_groups[filter[i].branch1][iter->array[
      filter[i].branch1]]);
            printf("%p\n", filtered_groups[filter[i].branch1][iter->array[
      filter[i].branch1]]->aggr);
            /*
            if
       (!filter[i].func(filtered_groups[filter[i].branch1][iter->array[filter[i].branch1]], filter[i].field1,
                               
       filtered_groups[filter[i].branch2][iter->array[filter[i].branch2]], filter[i].field2,
                                filter[i].delta)) goto cont;
                                */
        }
/*
        for (i = 0; i < num_threads; i++) {
            printf("%zd ", iter->array[i]);
        }
        printf("\n");
        */

cont:   continue;
    } while (iter_next(iter));

    printf("foobar\n");
    group_tuples = NULL;
//    num_group_tuples = 0;

/*
    for (i = 0; filtered_groups[0][i]->aggr != NULL; i++) {
        for (j = 0; filtered_groups[1][j]->aggr != NULL; j++) {
            if (!filter[0].func(filtered_groups[0][i], filter[0].field1,
       filtered_groups[1][j], filter[0].field2, filter[0].delta)
                    || !filter[1].func(filtered_groups[0][i], filter[1].field1,
       filtered_groups[1][j], filter[1].field2, filter[1].delta)
                    )
                continue;

            temp_tuple = (struct group **)malloc(sizeof(struct group *)*
      num_threads);
            if (temp_tuple == NULL) {
                perror("malloc");
                exit(EXIT_FAILURE);
            }

            temp_tuple[0] = filtered_groups[0][i];
            temp_tuple[1] = filtered_groups[1][j];

            group_tuples = (struct group ***)realloc(group_tuples,
       sizeof(struct group**)*(num_group_tuples+1));
            1if (group_tuples == NULL) {
                perror("malloc");
                exit(EXIT_FAILURE);
            }

            group_tuples[num_group_tuples] = temp_tuple;
            num_group_tuples++;
        }
    }

    group_tuples = (struct group ***)realloc(group_tuples, sizeof(struct group*
      *)*(num_group_tuples+1));
    if (group_tuples == NULL) {
        perror("malloc");
        exit(EXIT_FAILURE);
    }
    group_tuples[num_group_tuples] = NULL;

    printf("number of group tuples: %d\n", num_group_tuples);

*/
    return group_tuples;
}
\end{DoxyCode}


\-Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=218pt]{merger__fptr_8c_a3355351c471c88039bef49a658c06109_cgraph}
\end{center}
\end{figure}


