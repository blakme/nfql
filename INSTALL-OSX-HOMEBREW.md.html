<h1 id="nfql">NFQL</h1>
<hr />
<p>An efficient C implementation of the network flow query language (NFQL).</p>
<h3 id="installation-on-mac-os-x-using-homebrew">Installation on Mac OS X using Homebrew</h3>
<p>Install <a href="http://mxcl.github.com/homebrew/">Homebrew â†’</a></p>
<pre><code>$ ruby -e &quot;$(curl -fsSL https://raw.github.com/Homebrew/homebrew/go/install)&quot;</code></pre>
<p>Install Dependencies</p>
<pre><code>$ brew install cmake
$ brew install flow-tools</code></pre>
<p>NOTE: <code>json-c</code> starting from v0.11 has renamed the library from <code>libjson</code> to <code>libjson-c</code>. Debian-based systems are currently providing v0.10 in the repository. In order to avoid complexity in the makefile, we have decided to freeze the library dependency to v0.10. Install <code>json-c</code> v0.10:</p>
<pre><code>$  brew install https://raw.github.com/mxcl/homebrew/9f78662acff4c3cb1bff3587c8ead7f5935925a9/Library/Formula/json-c.rb</code></pre>
<p>Install IPFIX protocol library</p>
<pre><code>$ brew install libfixbuf
$ brew install gettext
$ brew link --force gettext</code></pre>
<p>Build and install <code>nfql</code></p>
<pre><code>[nfql] $ make
[nfql] $ make install</code></pre>
<p>Read the man page</p>
<pre><code>$ brew install most
$ man nfql | most</code></pre>
<p>Generate Documentation (optional)</p>
<pre><code>$ brew install doxygen
$ brew install graphviz
[nfql] $ make doc</code></pre>
<p>Cleanup</p>
<pre><code>[nfql] $ make clean</code></pre>
<h4 id="running-nfql">Running <code>nfql</code></h4>
<p>Some example queries are provided in <code>examples/</code> along with a sample trace.</p>
<pre><code>[nfql] $ nfql --ipfix examples/query-http-tcp-session.json examples/trace-2009.ipfix
[nfql] $ nfql examples/query-http-tcp-session.json examples/trace-2009.ft</code></pre>
<p>The sample queries can also be run on your own <code>NetFlow v5</code> records</p>
<pre><code>[nfql] $ flow-cat tracefile[s] | nfql examples/query-http-tcp-session.json -</code></pre>
<h4 id="running-the-test-suite">Running the Test Suite</h4>
<p>To run the complete regression test-suite:</p>
<pre><code>[nfql] $ tests/regression.py [-v]</code></pre>
<p>Regression tests can also be run individually on a specific example query type. For instance:</p>
<pre><code>[nfql] $ tests/test-query-http-tcp-session.py [-v]</code></pre>
<h4 id="running-the-benchmarks">Running the Benchmarks</h4>
<p>To run the <code>nfql</code> benchmarks:</p>
<pre><code>[nfql] $ make
[nfql] $ sudo benchmarks/nfql.py nfql tracefile[s]/ querie[s]/</code></pre>
<p>Example <code>nfql</code> traces and queries are provided in <code>examples/</code></p>
<p>To run the <code>SiLK</code> benchmarks:</p>
<pre><code>[nfql] $ sudo benchmarks/silk.py tracefile[s]/ querie[s]/</code></pre>
<p>Example <code>SiLK</code> traces and queries are provided in <code>examples/silk/</code></p>
